<view><u-toast class="vue-ref" vue-id="b0c84e72-1" data-ref="uToast" bind:__l="__l"></u-toast><scroll-view class="{{['DrawerPage',modalName=='showUserDetail'?'show':'']}}" scroll-y="{{true}}"><u-sticky vue-id="b0c84e72-2" bind:__l="__l" vue-slots="{{['default']}}"><u-navbar vue-id="{{('b0c84e72-3')+','+('b0c84e72-2')}}" title="用户列表" background="{{$root.a0}}" is-fixed="true" title-size="40" is-back="{{true}}" title-color="#ffffff" back-text="返回" back-text-style="{{$root.a1}}" back-icon-color="white" bind:__l="__l"></u-navbar><view class="cu-list grid col-4 "><view class="cu-item"><view class="text-xl text-green text-bold"><u-count-to class="vue-ref" vue-id="{{('b0c84e72-4')+','+('b0c84e72-2')}}" start-val="{{0}}" end-val="{{userList.length}}" duration="{{1500}}" use-easing="{{true}}" autoplay="{{true}}" bold="true" color="#39b54a" data-ref="uCountTo1" bind:__l="__l"></u-count-to></view><view class=" text-grey text-xs " style="padding-top:15rpx;">总数</view></view><view class="cu-item"><view class="text-xl text-blue text-bold"><u-count-to class="vue-ref" vue-id="{{('b0c84e72-5')+','+('b0c84e72-2')}}" start-val="{{0}}" end-val="{{1}}" duration="{{1500}}" use-easing="{{true}}" autoplay="{{true}}" bold="true" color="#0081ff" data-ref="uCountTo1" bind:__l="__l"></u-count-to></view><view class=" text-grey text-xs " style="padding-top:15rpx;">今日新增</view></view><view class="cu-item"><view class="text-xl text-blue text-bold"><u-count-to class="vue-ref" vue-id="{{('b0c84e72-6')+','+('b0c84e72-2')}}" start-val="{{0}}" end-val="{{realUserList.length}}" duration="{{1500}}" use-easing="{{true}}" autoplay="{{true}}" bold="true" color="#f37b1d" data-ref="uCountTo1" bind:__l="__l"></u-count-to></view><view class=" text-grey text-xs " style="padding-top:15rpx;">已实名</view></view><view class="cu-item"><view class="text-xl text-blue text-bold"><u-count-to class="vue-ref" vue-id="{{('b0c84e72-7')+','+('b0c84e72-2')}}" start-val="{{0}}" end-val="{{unRealUserList.length}}" duration="{{1500}}" use-easing="{{true}}" autoplay="{{true}}" bold="true" color="#red" data-ref="uCountTo1" bind:__l="__l"></u-count-to></view><view class=" text-grey text-xs " style="padding-top:15rpx;">未实名</view></view></view><u-subsection vue-id="{{('b0c84e72-8')+','+('b0c84e72-2')}}" list="{{subsectionList}}" current="{{currentTab}}" button-color="#0081ff" active-color="white" data-event-opts="{{[['^change',[['sectionChange']]]]}}" bind:change="__e" bind:__l="__l"></u-subsection></u-sticky><block wx:if="{{currentTab==0}}"><u-index-list vue-id="b0c84e72-9" scrollTop="{{scrollTop}}" index-list="{{indexList}}" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{indexList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view><u-index-anchor class="padding-top " vue-id="{{('b0c84e72-10-'+index)+','+('b0c84e72-9')}}" index="{{item}}" bind:__l="__l"></u-index-anchor><u-cell-group class="margin-top shadow-lg" vue-id="{{('b0c84e72-11-'+index)+','+('b0c84e72-9')}}" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{realUserList}}" wx:for-item="item2" wx:for-index="index2" wx:key="index2"><block wx:if="{{item2.index==item}}"><u-cell-item vue-id="{{('b0c84e72-12-'+index+'-'+index2)+','+('b0c84e72-11-'+index)}}" arrow="{{false}}" data-event-opts="{{[['^click',[['showUserDetail',['$0'],[[['realUserList','',index2,'uid']]]]]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['title','icon','right-icon']}}"><view class="text-black text-bold text-lg padding-xs" slot="title">{{item2.user.realName}}<text class="text-grey">{{'('+item2.nickName+")"}}</text></view><view class="cu-avatar radius " style="{{'background-image:'+('url('+item2.avatarUrl+')')+';'}}" slot="icon"><block wx:if="{{item2.user.level==1}}"><view class="cu-tag badge ">超管</view></block></view><u-button vue-id="{{('b0c84e72-13-'+index+'-'+index2)+','+('b0c84e72-12-'+index+'-'+index2)}}" slot="right-icon" type="primary" ripple="{{true}}" plain="{{true}}" size="mini" data-event-opts="{{[['^click',[['showUserDetail',['$0'],[[['realUserList','',index2,'uid']]]]]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">查看详情</u-button></u-cell-item></block></block></u-cell-group></view></block></u-index-list></block><u-cell-group class="margin-top shadow-lg" vue-id="b0c84e72-14" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{unRealUserList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{currentTab==1}}"><u-cell-item vue-id="{{('b0c84e72-15-'+index)+','+('b0c84e72-14')}}" arrow="{{false}}" bind:__l="__l" vue-slots="{{['title','icon']}}"><view class="text-black text-bold text-lg padding-xs" slot="title">未实名<text class="text-grey">{{'（'+item.nickName+")"}}</text></view><view class="cu-avatar radius " style="{{'background-image:'+('url('+item.avatarUrl+')')+';'}}" slot="icon"></view></u-cell-item></block></block></u-cell-group></scroll-view><view data-event-opts="{{[['tap',[['hideModal',['$event']]]]]}}" class="{{['DrawerClose',modalName=='showUserDetail'?'show':'']}}" bindtap="__e"><text class="cuIcon-pullright"></text></view><u-calendar vue-id="b0c84e72-16" mode="range" safeAreaInsetBottom="true" closeable="{{false}}" value="{{isCale}}" data-event-opts="{{[['^change',[['changeCale']]],['^input',[['__set_model',['','isCale','$event',[]]]]]]}}" bind:change="__e" bind:input="__e" bind:__l="__l" vue-slots="{{['tooltip']}}"><view style="text-align:center;" slot="tooltip"><u-button vue-id="{{('b0c84e72-17')+','+('b0c84e72-16')}}" type="primary" size="default" ripple="{{true}}" data-event-opts="{{[['^click',[['changeCale2']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">查看所有</u-button></view></u-calendar><scroll-view class="{{['DrawerWindow',modalName=='showUserDetail'?'show':'']}}" scroll-y="{{true}}" scroll-top="{{scrollTop}}" data-event-opts="{{[['scroll',[['scroll',['$event']]]]]}}" bindscroll="__e"><view class="padding-top-lg" style="position:fixed;top:0;width:100%;z-index:10;"><view class="cu-list grid col-4"><view class="cu-item"><view class="text-xl text-green text-bold"><u-count-to vue-id="b0c84e72-18" start-val="{{0}}" end-val="{{userLog_len}}" duration="{{1500}}" use-easing="{{true}}" autoplay="{{true}}" bold="true" color="#39b54a" font-size="35" bind:__l="__l"></u-count-to></view><view class=" text-grey text-xs " style="padding-top:15rpx;">日志数</view></view><view class="cu-item"><view class="text-xl text-black text-bold"><u-count-to vue-id="b0c84e72-19" start-val="{{0}}" end-val="{{$root.g0}}" duration="{{1500}}" use-easing="{{true}}" autoplay="{{true}}" bold="true" color="#0081ff" font-size="35" bind:__l="__l"></u-count-to>h<u-count-to vue-id="b0c84e72-20" start-val="{{0}}" end-val="{{$root.g1}}" duration="{{1500}}" use-easing="{{false}}" autoplay="{{true}}" bold="true" color="#0081ff" font-size="35" bind:__l="__l"></u-count-to>m</view><view class=" text-grey text-xs " style="padding-top:15rpx;">活跃度</view></view><view class="cu-item"><view class="text-xl text-blue text-bold"><u-count-to vue-id="b0c84e72-21" start-val="{{0}}" end-val="{{userRoom_len}}" duration="{{1500}}" use-easing="{{true}}" autoplay="{{true}}" bold="true" color="#1cbbb4" font-size="35" bind:__l="__l"></u-count-to></view><view class=" text-grey text-xs " style="padding-top:15rpx;">去过的实验室</view></view><view class="cu-item"><view class="text-xl text-blue text-bold"><u-count-to vue-id="b0c84e72-22" start-val="{{0}}" end-val="{{userAdminRoom_len}}" duration="{{1500}}" use-easing="{{true}}" autoplay="{{true}}" bold="true" color="#f37b1d" font-size="35" bind:__l="__l"></u-count-to></view><view class=" text-grey text-xs " style="padding-top:15rpx;">管理的实验室</view></view></view><view class="bg-blue shadow-blur"><u-subsection vue-id="b0c84e72-23" list="{{userDetailTabs}}" current="{{currentDetailTab}}" button-color="#0081ff" active-color="white" data-event-opts="{{[['^change',[['userDetailTabsChange']]]]}}" bind:change="__e" bind:__l="__l"></u-subsection><block wx:if="{{currentDetailTab>0}}"><u-cell-group vue-id="b0c84e72-24" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{startDate!=null&&endDate!=null&&currentDetailTab==1}}"><u-cell-item vue-id="{{('b0c84e72-25')+','+('b0c84e72-24')}}" title="{{'从'+startDate+'到'+endDate}}" label="{{'时长'+$root.g2+'时'+$root.g3+'分,共'+userLog.length+'条日志'}}" arrow="{{false}}" data-event-opts="{{[['^tap',[['showCale']]]]}}" bind:tap="__e" bind:__l="__l" vue-slots="{{['icon','right-icon']}}"><view class="cuIcon-calendar padding-right-sm padding-bottom-lg text-blue" slot="icon"></view><u-button vue-id="{{('b0c84e72-26')+','+('b0c84e72-25')}}" slot="right-icon" type="primary" ripple="{{true}}" plain="{{true}}" size="mini" data-event-opts="{{[['^click',[['showCale']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">筛选</u-button></u-cell-item></block></u-cell-group></block></view></view><view style="margin-top:210rpx;"><block wx:if="{{currentDetailTab==0}}"><block><view class="cu-list card-menu shadow margin-top"><u-cell-group vue-id="b0c84e72-27" bind:__l="__l" vue-slots="{{['default']}}"><u-cell-item vue-id="{{('b0c84e72-28')+','+('b0c84e72-27')}}" arrow="{{false}}" bind:__l="__l" vue-slots="{{['title','icon']}}"><view class="text-black text-bold text-lg padding" slot="title">{{userDetail.realName}}<text class="text-grey">{{'('+userDetail.wxuser.nickName+")"}}</text></view><view class="cu-avatar radius shadow-blur" style="{{'background-image:'+('url('+userDetail.wxuser.avatarUrl+')')+';'}}" slot="icon"><view class="{{['cu-tag badge',wxuserInfo.gender==1?'cuIcon-male bg-blue':'cuIcon-male bg-blue']}}"></view></view></u-cell-item><u-cell-item vue-id="{{('b0c84e72-29')+','+('b0c84e72-27')}}" arrow="{{false}}" center="{{true}}" title="uid" value="{{userDetail.uid}}" bind:__l="__l" vue-slots="{{['icon']}}"><view class="cuIcon-title padding-right-sm text-green" slot="icon"></view></u-cell-item><u-cell-item vue-id="{{('b0c84e72-30')+','+('b0c84e72-27')}}" arrow="{{false}}" center="{{true}}" title="手机" data-event-opts="{{[['^click',[['callPhone',['$0'],['userDetail.phone']]]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['icon','right-icon']}}"><view class="cuIcon-phone padding-right-sm text-red" slot="icon"></view><u-button vue-id="{{('b0c84e72-31')+','+('b0c84e72-30')}}" slot="right-icon" type="primary" ripple="{{true}}" plain="{{true}}" size="mini" data-event-opts="{{[['^click',[['callPhone',['$0'],['userDetail.phone']]]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">{{"拨打"+userDetail.phone}}</u-button></u-cell-item><u-cell-item vue-id="{{('b0c84e72-32')+','+('b0c84e72-27')}}" arrow="{{false}}" center="{{true}}" title="注册时间" value="{{regDate}}" bind:__l="__l" vue-slots="{{['icon']}}"><view class="cuIcon-calendar padding-right-sm text-cyan" slot="icon"></view></u-cell-item><u-cell-item vue-id="{{('b0c84e72-33')+','+('b0c84e72-27')}}" arrow="{{false}}" center="{{true}}" title="上次登录" value="{{lastLoginDate}}" bind:__l="__l" vue-slots="{{['icon']}}"><view class="cuIcon-calendar padding-right-sm text-blue" slot="icon"></view></u-cell-item><block wx:if="{{userDetail.level==1}}"><u-cell-item vue-id="{{('b0c84e72-34')+','+('b0c84e72-27')}}" arrow="{{false}}" center="{{true}}" title="权限" value="超级管理员" bind:__l="__l" vue-slots="{{['icon']}}"><view class="cuIcon-flashbuyfill padding-right-sm text-orange" slot="icon"></view></u-cell-item></block><block wx:else><u-cell-item vue-id="{{('b0c84e72-35')+','+('b0c84e72-27')}}" arrow="{{false}}" center="{{true}}" title="权限" value="普通用户" bind:__l="__l" vue-slots="{{['icon']}}"><view class="cuIcon-flashbuyfill padding-right-sm text-orange" slot="icon"></view></u-cell-item></block></u-cell-group></view></block></block><block wx:else><block wx:if="{{currentDetailTab==1}}"><block><view style="padding-top:110rpx;"><block wx:if="{{userLog.length==0}}"><u-empty vue-id="b0c84e72-36" text="还没有日志" mode="message" bind:__l="__l"></u-empty></block><block wx:else><block wx:if="{{userLog.length>0}}"><block><block wx:if="{{modalName=='showUserDetail'&&currentDetailTab==1}}"><drag-button vue-id="b0c84e72-37" isDock="{{true}}" existTabBar="{{true}}" data-event-opts="{{[['^btnClick',[['showCale']]]]}}" bind:btnClick="__e" bind:__l="__l" vue-slots="{{['icon']}}"><view class="text-xxl" slot="icon"><text class=" cuIcon-calendar "></text></view></drag-button></block><view class="cu-timeline"><view class="text-bold text-xxl padding-left-sm">2020</view><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block><view class="{{['cu-item ',item.$orig.status==1?'cuIcon-attentionfill text-green':'cuIcon-attentionforbidfill text-blue']}}"><view class="cu-capsule radius shadow"><view class="{{['cu-tag sm',item.$orig.status==1?'bg-green':'bg-blue']}}">{{item.f0}}</view><view class="{{['cu-tag  sm',item.$orig.status==1?'line-green':'line-blue']}}">{{item.f1+' '+item.f2}}</view></view><block wx:if="{{item.$orig.during}}"><view class="cu-capsule radius shadow-blur"><view class="cu-tag bg-blue sm">时长</view><view class="cu-tag line-blue sm">{{item.f3}}</view></view></block><view class="{{[' shadow-blur solids',item.$orig.status==1?'bg-green':'bg-blue']}}"><u-cell-group class=" shadow-lg" vue-id="{{'b0c84e72-38-'+index}}" bind:__l="__l" vue-slots="{{['default']}}"><u-cell-item vue-id="{{('b0c84e72-39-'+index)+','+('b0c84e72-38-'+index)}}" arrow="{{false}}" bind:__l="__l" vue-slots="{{['title','icon']}}"><view class="text-black text-bold text-sm padding-left-sm" slot="title">{{"通过指纹"+(item.$orig.status==1?'进入':'离开')}}<view class="_br"></view><view class="cu-capsule radius shadow-blur"><view class="{{['cu-tag sm ',item.$orig.status==1?'bg-green':'bg-blue']}}"><text class="cuIcon-location"></text></view><view class="{{['cu-tag  sm',item.$orig.status==1?'line-green':'line-blue']}}">{{item.$orig.room.rname}}</view></view></view><view class="{{['cu-avatar radius shadow',item.$orig.status==1?'bg-green':'bg-blue']}}" slot="icon">{{''+(item.$orig.status==1?'进':'出')+''}}</view></u-cell-item></u-cell-group></view></view></block></block></view></block></block></block></view></block></block><block wx:else><block wx:if="{{currentDetailTab==2}}"><block><block wx:if="{{userRoom.length==0}}"><u-empty vue-id="b0c84e72-40" text="还没有去过的实验室" mode="message" bind:__l="__l"></u-empty></block><block wx:else><block wx:if="{{userRoom.length>0}}"><view class="cu-card "><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="cu-item shadow-blur bg-img bg-mask flex align-center" style="{{'height:180rpx;'+('background-image:'+('url(http://mp-images.test.upcdn.net/lab'+index%4+'.jpg)')+';')}}" data-rid="{{item.$orig.rid}}" data-rname="{{item.$orig.rname}}" data-address="{{item.$orig.address}}" data-del="{{item.$orig.del}}" data-event-opts="{{[['tap',[['toRoomDetail',['$event']]]]]}}" bindtap="__e"><navigator><view class="flex solid-bottom justify-between"><view class="padding-left-xl padding-top-sm text-white"><view class=" text-xxl text-bold">{{''+item.$orig.rname+''}}</view><view class="padding-top-xs text-lg"><u-button vue-id="{{'b0c84e72-41-'+index}}" type="success" ripple="{{true}}" size="mini" bind:__l="__l" vue-slots="{{['default']}}">{{"共"+item.$orig.logCount+"条日志"}}</u-button><block wx:if="{{item.$orig.roomDuring}}"><u-button class="padding-left-sm" vue-id="{{'b0c84e72-42-'+index}}" type="primary" ripple="{{true}}" size="mini" bind:__l="__l" vue-slots="{{['default']}}">{{"时长:"+item.f4}}</u-button></block><block wx:else><u-button class="padding-left-sm" vue-id="{{'b0c84e72-43-'+index}}" type="primary" ripple="{{true}}" size="mini" bind:__l="__l" vue-slots="{{['default']}}">时长:0时0分</u-button></block></view></view><block wx:if="{{index==0||index==1}}"><u-tag vue-id="{{'b0c84e72-44-'+index}}" text="常去" type="success" mode="dark" bind:__l="__l"></u-tag></block></view></navigator></view></block></view></block></block></block></block><block wx:else><block wx:if="{{currentDetailTab==3}}"><block><block wx:if="{{userAdminRoom.length==0}}"><u-empty vue-id="b0c84e72-45" text="还没有管理的实验室" mode="message" bind:__l="__l"></u-empty></block><block wx:else><block wx:if="{{userAdminRoom.length>0}}"><view class="cu-card bg-white"><block wx:for="{{userAdminRoom}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="cu-item shadow-blur bg-img bg-mask flex align-center" style="{{'height:180rpx;'+('background-image:'+('url(http://mp-images.test.upcdn.net/lab'+index%4+'.jpg)')+';')}}" data-rid="{{item.rid}}" data-rname="{{item.room.rname}}" data-address="{{item.room.address}}" data-del="{{item.room.del}}" data-event-opts="{{[['tap',[['toRoomDetail',['$event']]]]]}}" bindtap="__e"><navigator><view class="flex solid-bottom justify-between"><view class="padding-left-xl padding-top-sm text-white"><view class=" text-xxl text-bold">{{''+item.room.rname+''}}</view><view class="padding-top-xs text-lg"><u-button vue-id="{{'b0c84e72-46-'+index}}" type="primary" ripple="{{true}}" size="mini" bind:__l="__l" vue-slots="{{['default']}}"><text class="cuIcon-location"></text>{{item.room.address}}</u-button></view></view><block wx:if="{{item.room.del==1}}"><u-tag vue-id="{{'b0c84e72-47-'+index}}" text="已开放" type="success" mode="dark" bind:__l="__l"></u-tag></block><block wx:else><u-tag vue-id="{{'b0c84e72-48-'+index}}" text="已关闭" type="error" mode="dark" bind:__l="__l"></u-tag></block></view></navigator></view></block></view></block></block></block></block></block></block></block></view></scroll-view></view>