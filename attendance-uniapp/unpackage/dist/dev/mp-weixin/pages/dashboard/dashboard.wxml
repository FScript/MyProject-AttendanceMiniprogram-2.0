<view class="bg-white"><u-toast class="vue-ref" vue-id="469bc196-1" data-ref="uToast" bind:__l="__l"></u-toast><u-back-top vue-id="469bc196-2" scroll-top="{{scrollTop}}" mode="square" top="0" bottom="20" bind:__l="__l"></u-back-top><u-sticky vue-id="469bc196-3" bind:__l="__l" vue-slots="{{['default']}}"><u-navbar vue-id="{{('469bc196-4')+','+('469bc196-3')}}" title="控制台" background="{{$root.a0}}" is-fixed="true" title-size="40" is-back="{{false}}" title-color="#ffffff" bind:__l="__l"></u-navbar><view class="bg-white"><u-collapse style="background-color:white;z-index:9999;" vue-id="{{('469bc196-5')+','+('469bc196-3')}}" bind:__l="__l" vue-slots="{{['default']}}"><u-collapse-item vue-id="{{('469bc196-6')+','+('469bc196-5')}}" title="实验室总览" open="{{collapse}}" bind:__l="__l" vue-slots="{{['default']}}"><view class="cu-list grid col-4 "><view class="cu-item"><view class="text-xl text-green text-bold"><u-count-to class="vue-ref" vue-id="{{('469bc196-7')+','+('469bc196-6')}}" start-val="{{0}}" end-val="{{roomList.length}}" duration="{{1500}}" use-easing="{{true}}" autoplay="{{true}}" bold="true" color="#39b54a" font-size="40" data-ref="uCountTo1" bind:__l="__l"></u-count-to></view><view class=" text-grey text-xs " style="padding-top:15rpx;">总数</view></view><view class="cu-item"><view class="text-xl text-blue text-bold">+<u-count-to class="vue-ref" vue-id="{{('469bc196-8')+','+('469bc196-6')}}" start-val="{{0}}" end-val="{{1}}" duration="{{1500}}" use-easing="{{true}}" autoplay="{{true}}" bold="true" color="#0081ff" font-size="40" data-ref="uCountTo1" bind:__l="__l"></u-count-to></view><view class=" text-grey text-xs " style="padding-top:15rpx;">今日新增</view></view><view class="cu-item"><view class="text-xl text-orange text-bold"><u-count-to class="vue-ref" vue-id="{{('469bc196-9')+','+('469bc196-6')}}" start-val="{{0}}" end-val="{{openRoomList.length}}" duration="{{1500}}" use-easing="{{true}}" autoplay="{{true}}" bold="true" color="#f37b1d" font-size="40" data-ref="uCountTo1" bind:__l="__l"></u-count-to></view><view class=" text-grey text-xs " style="padding-top:15rpx;">已开放</view></view><view class="cu-item"><view class="text-xl text-black text-bold"><u-count-to class="vue-ref" vue-id="{{('469bc196-10')+','+('469bc196-6')}}" start-val="{{0}}" end-val="{{closeRoomList.length}}" duration="{{1500}}" use-easing="{{true}}" autoplay="{{true}}" bold="true" color="red" font-size="40" data-ref="uCountTo1" bind:__l="__l"></u-count-to></view><view class=" text-grey text-xs " style="padding-top:15rpx;">已关闭</view></view></view></u-collapse-item></u-collapse></view><u-subsection vue-id="{{('469bc196-11')+','+('469bc196-3')}}" bold="{{true}}" list="{{tabsList}}" current="{{currentTabs}}" button-color="#0081ff" active-color="white" data-event-opts="{{[['^change',[['tabsChange']]]]}}" bind:change="__e" bind:__l="__l"></u-subsection><block wx:if="{{currentTabs==0}}"><u-tabs class="vue-ref" vue-id="{{('469bc196-12')+','+('469bc196-3')}}" list="{{roomTabsList}}" bold="{{true}}" is-scroll="{{false}}" current="{{currentLabTabs}}" height="70" font-size="25" data-ref="tabs" data-event-opts="{{[['^change',[['labTabsChange']]]]}}" bind:change="__e" bind:__l="__l"></u-tabs></block><view class="shadow bg-blue"><block wx:if="{{currentTabs==2&&userInfo.level==1}}"><u-cell-group vue-id="{{('469bc196-13')+','+('469bc196-3')}}" bind:__l="__l" vue-slots="{{['default']}}"><u-cell-item vue-id="{{('469bc196-14')+','+('469bc196-13')}}" title="{{'从'+startDate+'到'+endDate}}" label="{{'共'+logList.length+'条日志'}}" arrow="{{false}}" arrow-direction="down" data-event-opts="{{[['^tap',[['showCale']]]]}}" bind:tap="__e" bind:__l="__l" vue-slots="{{['icon','right-icon']}}"><view class="cuIcon-calendar padding-right-sm text-blue" slot="icon"></view><u-button vue-id="{{('469bc196-15')+','+('469bc196-14')}}" slot="right-icon" type="primary" ripple="{{true}}" plain="{{true}}" size="mini" data-event-opts="{{[['^click',[['showCale']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">日期筛选</u-button></u-cell-item></u-cell-group></block><block wx:if="{{currentTabs==0}}"><u-cell-group vue-id="{{('469bc196-16')+','+('469bc196-3')}}" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{currentLabTabs==0}}"><u-cell-item vue-id="{{('469bc196-17')+','+('469bc196-16')}}" title="{{'共有'+roomList.length+'间实验室'}}" arrow="{{false}}" data-event-opts="{{[['^click',[['readyAddRoom']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default','icon']}}"><view class="cuIcon-discover padding-right-sm  text-blue" slot="icon"></view><block wx:if="{{userInfo.level==1}}"><u-button vue-id="{{('469bc196-18')+','+('469bc196-17')}}" slot="right-icon" type="primary" ripple="{{true}}" plain="{{true}}" size="mini" data-event-opts="{{[['^click',[['readyAddRoom']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">添加实验室</u-button></block></u-cell-item></block><block wx:else><block wx:if="{{currentLabTabs==1}}"><u-cell-item vue-id="{{('469bc196-19')+','+('469bc196-16')}}" title="{{'共有'+openRoomList.length+'间实验室已开放'}}" arrow="{{false}}" bind:__l="__l" vue-slots="{{['default','icon']}}"><view class="cuIcon-discover padding-right-sm  text-blue" slot="icon"></view><block wx:if="{{userInfo.level==1}}"><u-button vue-id="{{('469bc196-20')+','+('469bc196-19')}}" slot="right-icon" type="primary" ripple="{{true}}" plain="{{true}}" size="mini" data-event-opts="{{[['^click',[['readyAddRoom']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">添加实验室</u-button></block></u-cell-item></block><block wx:else><block wx:if="{{currentLabTabs==2}}"><u-cell-item vue-id="{{('469bc196-21')+','+('469bc196-16')}}" title="{{'共有'+closeRoomList.length+'间实验室已关闭'}}" arrow="{{false}}" bind:__l="__l" vue-slots="{{['default','icon']}}"><view class="cuIcon-discover padding-right-sm  text-blue" slot="icon"></view><block wx:if="{{userInfo.level==1}}"><u-button vue-id="{{('469bc196-22')+','+('469bc196-21')}}" slot="right-icon" type="primary" ripple="{{true}}" plain="{{true}}" size="mini" data-event-opts="{{[['^click',[['readyAddRoom']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">添加实验室</u-button></block></u-cell-item></block></block></block><block wx:if="{{currentLabTabs==3&&userInfo!=null}}"><u-cell-item vue-id="{{('469bc196-23')+','+('469bc196-16')}}" title="{{'共有'+myAdminRoomList.length+'间我管理的实验室'}}" arrow="{{false}}" bind:__l="__l" vue-slots="{{['icon']}}"><view class="cuIcon-discover padding-right-sm  text-blue" slot="icon"></view></u-cell-item></block><block wx:else><block wx:if="{{currentLabTabs==3&&userInfo==null}}"><navigator url="../profile/profile" open-type="switchTab"><u-cell-item vue-id="{{('469bc196-24')+','+('469bc196-16')}}" title="您还未实名绑定无法获取" value="去实名绑定" arrow="{{false}}" bind:__l="__l" vue-slots="{{['icon']}}"><u-icon class="padding-right-sm" vue-id="{{('469bc196-25')+','+('469bc196-24')}}" slot="icon" size="38" name="warning" color="#ff9900" bind:__l="__l"></u-icon></u-cell-item></navigator></block></block></u-cell-group></block></view></u-sticky><block wx:if="{{currentTabs==0}}"><block><u-popup bind:input="__e" vue-id="469bc196-26" length="50%" mode="top" border-radius="40" value="{{showReadyAddRoom}}" data-event-opts="{{[['^input',[['__set_model',['','showReadyAddRoom','$event',[]]]]]]}}" bind:__l="__l" vue-slots="{{['default']}}"><u-toast class="vue-ref" vue-id="{{('469bc196-27')+','+('469bc196-26')}}" data-ref="uToast_mask" bind:__l="__l"></u-toast><view style="position:absolute;bottom:0;width:100%;"><u-cell-group vue-id="{{('469bc196-28')+','+('469bc196-26')}}" bind:__l="__l" vue-slots="{{['default']}}"><u-field vue-id="{{('469bc196-29')+','+('469bc196-28')}}" label="名称" icon="bookmark" icon-color="green" placeholder="全名请勿重复" error-message="{{roomNameErrorMsg}}" name="form_roomName" value="{{form_roomName}}" data-event-opts="{{[['^blur',[['checkRoom']]],['^input',[['__set_model',['','form_roomName','$event',[]]]]]]}}" bind:blur="__e" bind:input="__e" bind:__l="__l"></u-field></u-cell-group><u-cell-group vue-id="{{('469bc196-30')+','+('469bc196-26')}}" bind:__l="__l" vue-slots="{{['default']}}"><u-field bind:input="__e" vue-id="{{('469bc196-31')+','+('469bc196-30')}}" label="地址" icon="map" icon-color="blue" placeholder="详细地址" name="form_notice" type="textarea" value="{{form_roomAddress}}" data-event-opts="{{[['^input',[['__set_model',['','form_roomAddress','$event',[]]]]]]}}" bind:__l="__l"></u-field></u-cell-group><u-button vue-id="{{('469bc196-32')+','+('469bc196-26')}}" type="primary" plain="{{true}}" ripple="{{true}}" data-event-opts="{{[['^click',[['showConfirm']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">确认添加</u-button><u-button vue-id="{{('469bc196-33')+','+('469bc196-26')}}" type="error" plain="{{true}}" ripple="{{true}}" data-event-opts="{{[['^click',[['e0']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">取消</u-button></view></u-popup><view class="{{['cu-modal',modalName=='showConfirmAdd'?'show':'']}}"><view class="cu-dialog"><view class="cu-bar bg-white justify-end"><view class="content">确认信息</view></view><u-cell-group vue-id="469bc196-34" bind:__l="__l" vue-slots="{{['default']}}"><u-cell-item vue-id="{{('469bc196-35')+','+('469bc196-34')}}" arrow="{{false}}" center="{{true}}" title="实验室名称" value="{{form_roomName}}" bind:__l="__l" vue-slots="{{['icon']}}"><u-icon vue-id="{{('469bc196-36')+','+('469bc196-35')}}" slot="icon" size="32" color="green" name="bookmark" bind:__l="__l"></u-icon></u-cell-item><u-cell-item vue-id="{{('469bc196-37')+','+('469bc196-34')}}" arrow="{{false}}" center="{{true}}" title="实验室地址" value="{{form_roomAddress}}" bind:__l="__l" vue-slots="{{['icon']}}"><u-icon vue-id="{{('469bc196-38')+','+('469bc196-37')}}" slot="icon" size="32" color="blue" name="map" bind:__l="__l"></u-icon></u-cell-item></u-cell-group><view class="flex"><view class="flex-sub "><u-button vue-id="469bc196-39" type="primary" plain="{{true}}" ripple="{{true}}" data-event-opts="{{[['^click',[['readyAddRoom']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">返回</u-button></view><view class="flex-sub "><u-button vue-id="469bc196-40" type="success" plain="{{true}}" ripple="{{true}}" data-event-opts="{{[['^click',[['confirmAddRoom']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">确认</u-button></view></view></view></view><block wx:if="{{currentLabTabs<3}}"><view class="cu-card bg-white"><block wx:if="{{currentLabTabs==0}}"><block><block wx:for="{{roomList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="cu-item shadow-blur bg-img bg-mask flex align-center" style="{{'height:180rpx;'+('background-image:'+('url(http://mp-images.test.upcdn.net/lab'+index%4+'.jpg)')+';')}}" data-rid="{{item.rid}}" data-rname="{{item.rname}}" data-address="{{item.address}}" data-del="{{item.del}}" data-event-opts="{{[['tap',[['toRoomDetail',['$event']]]]]}}" bindtap="__e"><navigator><view class="flex solid-bottom justify-between"><view class="padding-left-xl padding-top-sm text-white"><view class=" text-xxl text-bold">{{''+item.rname+''}}</view><view class="padding-top-xs text-lg"><u-button vue-id="{{'469bc196-41-'+index}}" type="primary" ripple="{{true}}" size="mini" bind:__l="__l" vue-slots="{{['default']}}"><text class="cuIcon-location"></text>{{item.address}}</u-button></view></view><block wx:if="{{item.del==1}}"><u-tag vue-id="{{'469bc196-42-'+index}}" text="已开放" type="success" mode="dark" bind:__l="__l"></u-tag></block><block wx:else><u-tag vue-id="{{'469bc196-43-'+index}}" text="已关闭" type="error" mode="dark" bind:__l="__l"></u-tag></block></view></navigator></view></block><block wx:if="{{roomList.length==0}}"><u-empty vue-id="469bc196-44" text="实验室为空" mode="list" bind:__l="__l"></u-empty></block></block></block><block wx:else><block wx:if="{{currentLabTabs==1}}"><block><block wx:for="{{openRoomList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="cu-item shadow-blur bg-img bg-mask flex align-center" style="{{'height:180rpx;'+('background-image:'+('url(http://mp-images.test.upcdn.net/lab'+index%4+'.jpg)')+';')}}" data-rid="{{item.rid}}" data-rname="{{item.rname}}" data-address="{{item.address}}" data-del="{{item.del}}" data-event-opts="{{[['tap',[['toRoomDetail',['$event']]]]]}}" bindtap="__e"><navigator><view class="flex solid-bottom justify-between"><view class="padding-left-xl padding-top-sm text-white"><view class=" text-xxl text-bold">{{''+item.rname+''}}</view><view class="padding-top-xs text-lg"><u-button vue-id="{{'469bc196-45-'+index}}" type="primary" ripple="{{true}}" size="mini" bind:__l="__l" vue-slots="{{['default']}}"><text class="cuIcon-location"></text>{{item.address}}</u-button></view></view><block wx:if="{{item.del==1}}"><u-tag vue-id="{{'469bc196-46-'+index}}" text="已开放" type="success" mode="dark" bind:__l="__l"></u-tag></block><block wx:else><u-tag vue-id="{{'469bc196-47-'+index}}" text="已关闭" type="error" mode="dark" bind:__l="__l"></u-tag></block></view></navigator></view></block><block wx:if="{{openRoomList.length==0}}"><u-empty vue-id="469bc196-48" text="还没有已开放的实验室" mode="list" bind:__l="__l"></u-empty></block></block></block><block wx:else><block wx:if="{{currentLabTabs==2}}"><block><block wx:for="{{closeRoomList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="cu-item shadow-blur bg-img bg-mask flex align-center" style="{{'height:180rpx;'+('background-image:'+('url(http://mp-images.test.upcdn.net/lab'+index%4+'.jpg)')+';')}}" data-rid="{{item.rid}}" data-rname="{{item.rname}}" data-address="{{item.address}}" data-del="{{item.del}}" data-event-opts="{{[['tap',[['toRoomDetail',['$event']]]]]}}" bindtap="__e"><navigator><view class="flex solid-bottom justify-between"><view class="padding-left-xl padding-top-sm text-white"><view class=" text-xxl text-bold">{{''+item.rname+''}}</view><view class="padding-top-xs text-lg"><u-button vue-id="{{'469bc196-49-'+index}}" type="primary" ripple="{{true}}" size="mini" bind:__l="__l" vue-slots="{{['default']}}"><text class="cuIcon-location"></text>{{item.address}}</u-button></view></view><block wx:if="{{item.del==1}}"><u-tag vue-id="{{'469bc196-50-'+index}}" text="已开放" type="success" mode="dark" bind:__l="__l"></u-tag></block><block wx:else><u-tag vue-id="{{'469bc196-51-'+index}}" text="已关闭" type="error" mode="dark" bind:__l="__l"></u-tag></block></view></navigator></view></block><block wx:if="{{closeRoomList.length==0}}"><u-empty vue-id="469bc196-52" text="还没有已关闭的实验室" mode="list" bind:__l="__l"></u-empty></block></block></block></block></block></view></block><block wx:if="{{currentLabTabs==3}}"><view class="cu-card bg-white"><block wx:for="{{myAdminRoomList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="cu-item shadow-blur bg-img bg-mask flex align-center" style="{{'height:180rpx;'+('background-image:'+('url(http://mp-images.test.upcdn.net/lab'+index%4+'.jpg)')+';')}}" data-rid="{{item.rid}}" data-rname="{{item.room.rname}}" data-address="{{item.room.address}}" data-del="{{item.room.del}}" data-event-opts="{{[['tap',[['toRoomDetail',['$event']]]]]}}" bindtap="__e"><navigator><view class="flex solid-bottom justify-between"><view class="padding-left-xl padding-top-sm text-white"><view class=" text-xxl text-bold">{{''+item.room.rname+''}}</view><view class="padding-top-xs text-lg"><u-button vue-id="{{'469bc196-53-'+index}}" type="primary" ripple="{{true}}" size="mini" bind:__l="__l" vue-slots="{{['default']}}"><text class="cuIcon-location"></text>{{item.room.address}}</u-button></view></view><block wx:if="{{item.room.del==1}}"><u-tag vue-id="{{'469bc196-54-'+index}}" text="已开放" type="success" mode="dark" bind:__l="__l"></u-tag></block><block wx:else><u-tag vue-id="{{'469bc196-55-'+index}}" text="已关闭" type="error" mode="dark" bind:__l="__l"></u-tag></block></view></navigator></view></block></view></block></block></block><block wx:else><block wx:if="{{currentTabs==1}}"><block><block wx:if="{{userInfo.level==1}}"><block><navigator url="user"><view class="cu-card bg-white"><view class="cu-item shadow-blur bg-img bg-mask flex align-center" style="background-image:url(http://mp-images.test.upcdn.net/%E7%BD%AE%E9%A1%B6%E5%9B%BE.jpg);height:200rpx;"><view class="flex solid-bottom justify-between"><view class="padding-left-xl padding-top-lg text-white"><view class=" text-xxl text-bold">用户索引列表</view></view></view></view></view></navigator></block></block><block wx:else><block><u-cell-group vue-id="469bc196-56" bind:__l="__l" vue-slots="{{['default']}}"><navigator url="../profile/profile" open-type="switchTab"><u-cell-item vue-id="{{('469bc196-57')+','+('469bc196-56')}}" arrow="{{true}}" title="只有超级管理员能查看" value="去成为超级管理员" bind:__l="__l" vue-slots="{{['icon']}}"><u-icon class="padding-right-sm" vue-id="{{('469bc196-58')+','+('469bc196-57')}}" slot="icon" size="38" name="warning" color="#ff9900" bind:__l="__l"></u-icon></u-cell-item></navigator></u-cell-group></block></block></block></block></block><block wx:if="{{currentTabs==2}}"><block><block wx:if="{{userInfo.level!=1}}"><block><u-cell-group vue-id="469bc196-59" bind:__l="__l" vue-slots="{{['default']}}"><navigator url="../profile/profile" open-type="switchTab"><u-cell-item vue-id="{{('469bc196-60')+','+('469bc196-59')}}" arrow="{{true}}" title="您只能查看您管理的实验室的日志" value="去成为超级管理员" bind:__l="__l" vue-slots="{{['icon']}}"><u-icon class="padding-right-sm" vue-id="{{('469bc196-61')+','+('469bc196-60')}}" slot="icon" size="38" name="warning" color="#ff9900" bind:__l="__l"></u-icon></u-cell-item></navigator></u-cell-group></block></block><block wx:else><block><u-calendar vue-id="469bc196-62" mode="range" safeAreaInsetBottom="true" closeable="{{false}}" value="{{isCale}}" data-event-opts="{{[['^change',[['getAllLog']]],['^input',[['__set_model',['','isCale','$event',[]]]]]]}}" bind:change="__e" bind:input="__e" bind:__l="__l" vue-slots="{{['tooltip']}}"><view style="text-align:center;" slot="tooltip"><u-button vue-id="{{('469bc196-63')+','+('469bc196-62')}}" type="primary" shape="circle" size="default" ripple="{{true}}" data-event-opts="{{[['^click',[['getAllLog2']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">查看所有</u-button></view></u-calendar><block wx:if="{{logList.length==0}}"><u-empty vue-id="469bc196-64" text="还没有日志" mode="message" bind:__l="__l"></u-empty></block><view class="cu-timeline"><view class="text-bold text-xxl padding-left-sm">2020</view><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block><view class="{{['cu-item ',item.$orig.status==1?'cuIcon-attentionfill text-green':'cuIcon-attentionforbidfill text-blue']}}"><view class="cu-capsule radius shadow"><view class="{{['cu-tag sm',item.$orig.status==1?'bg-green':'bg-blue']}}">{{item.f0}}</view><view class="{{['cu-tag  sm',item.$orig.status==1?'line-green':'line-blue']}}">{{item.f1+' '+item.f2}}</view></view><block wx:if="{{item.$orig.during}}"><view class="cu-capsule radius shadow-blur"><view class="cu-tag bg-blue sm">时长</view><view class="cu-tag line-blue sm">{{item.f3}}</view></view></block><view class="{{[' shadow-blur solids',item.$orig.status==1?'bg-green':'bg-blue']}}"><u-cell-group class=" shadow-lg" vue-id="{{'469bc196-65-'+index}}" bind:__l="__l" vue-slots="{{['default']}}"><u-cell-item vue-id="{{('469bc196-66-'+index)+','+('469bc196-65-'+index)}}" arrow="{{false}}" bind:__l="__l" vue-slots="{{['title','icon','right-icon']}}"><view class="text-black text-bold text-sm padding-left-sm" slot="title">{{item.$orig.user.realName+"通过指纹"+(item.$orig.status==1?'进入':'离开')}}<view class="_br"></view><view class="cu-capsule radius shadow-blur"><view class="{{['cu-tag sm ',item.$orig.status==1?'bg-green':'bg-blue']}}"><text class="cuIcon-location"></text></view><view class="{{['cu-tag  sm',item.$orig.status==1?'line-green':'line-blue']}}">{{item.$orig.room.rname}}</view></view></view><view class="{{['cu-avatar radius shadow-blur',item.$orig.status==1?'bg-green':'bg-blue']}}" style="{{'background-image:'+('url('+item.$orig.wxuser.avatarUrl+')')+';'}}" slot="icon"></view><u-button vue-id="{{('469bc196-67-'+index)+','+('469bc196-66-'+index)}}" slot="right-icon" type="{{item.$orig.status==1?'success':'primary'}}" ripple="{{true}}" plain="{{true}}" size="mini" bind:__l="__l" vue-slots="{{['default']}}">{{(item.$orig.status==1?'进入':'离开')+''}}</u-button></u-cell-item></u-cell-group></view></view></block></block></view></block></block></block></block></view>